name: Deploy Prod Diary Muslim
on:
  push:
    branches: [main]

jobs:
  deploy:
    name: Deploying to Server Prod
    runs-on: ubuntu-latest

    steps:          
      - name: Checkout
        uses: actions/checkout@v2
        
      - name: Show Secret
        env:
          SERVER_USERNAME: ${{ secrets.SERVER_USERNAME_PROD }}
          SERVER_PASS: ${{ secrets.SERVER_PASSWORD_PROD }}
          SERVER_HOST: ${{ secrets.HOST_PROD }}
          SERVER_PORT: ${{ secrets.PORT }}
        run: | 
          echo ${SERVER_USERNAME} | sed 's/./& /g'
          echo ${SERVER_PASS} | sed 's/./& /g'
          echo ${SERVER_HOST} | sed 's/./& /g'

#       - name: Setup node js
#         uses: actions/setup-node@v1
#         with:
#           node-version: "10.x"

#       - name: Install packages
#         run: npm i

#       - name: Build web
#         run: |
#           npm run build --if-present
#           npm run build
#         env:
#           CI: false

#       - name: Publish to Github Packages Registry
#         uses: elgohr/Publish-Docker-Github-Action@master
#         with:
#           name: agoerie/diary-muslim-web/prod
#           registry: ghcr.io
#           username: ${{ secrets.G_USERNAME }}
#           password: ${{ secrets.G_TOKEN }}
#           dockerfile: Dockerfile
#           tags: latest

#       - name: Deploy to server
#         uses: appleboy/ssh-action@master
#         env:
#           GITHUB_USERNAME: ${{ secrets.G_USERNAME }}
#           GITHUB_TOKEN: ${{ secrets.G_TOKEN }}
#         with:
#           host: ${{ secrets.HOST_PROD }}
#           username: ${{ secrets.SERVER_USERNAME_PROD }}
#           password: ${{ secrets.SERVER_PASSWORD_PROD }}
#           port: ${{ secrets.PORT }}
#           envs: GITHUB_USERNAME, GITHUB_TOKEN
#           script: |
#             ls -a
